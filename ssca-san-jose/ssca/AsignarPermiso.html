
<!doctype html>
<html>
<head>
<meta charset="utf-8">
        <title>SSCA</title>
        <link href="css/style.css" rel="stylesheet"/>
        <link href="css/styleQR.css" rel="stylesheet"/>
        <link href="css/menu.css" rel="stylesheet"/>
        <link href="css/popup.css" rel="stylesheet"/>
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <script type="text/javascript" src="js/jquery-1.10.2.js"></script>
        <script type="text/javascript" src="js/style.js"></script>  
        <script type="text/javascript" src="js/ConexionWebService.js"></script>
        <link rel="stylesheet" media="screen" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.min.css">
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="js/alertify.js"></script>
        <link rel="stylesheet" href="css/alertify.core.css" />
        <link rel="stylesheet" href="css/alertify.default.css" />
        <script src="js/script.js"></script>
        <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        <script type="text/javascript" src="js/popup.js"></script>
        <script src="js/script.js"></script>
        <script src="js/jquery.min.js"></script>
       
        <style>
			input, button{
				border-radius:7px;
			}
			label, select{
				color:#000;
			}
			a{
				text-decoration:none;
			}
            h3 {
                 text-shadow: 0px 2px 3px #555;
               }
		</style>
        
</head>

<body id="bodyBase">
<h4 style="color:#CCC;margin-left:10px; margin-top:5px">Modulo Administrativo</h4>
        
        <h2 align="right" style="margin-top:2%; margin-right:2%; color:#00C">Asignacion de Permisos</h2>
        <div id='cssmenu'>
            <ul>
               <li class="active"><a href='#' title="Gestion de Usuarios"><span>Gestion de Usuarios</span></a>
                    <ul style="margin-right:-42%">
                         <li><a href='UsuariosdelSistema.html' title="Usuarios del Sistema"><span>Usuarios del Sistema</span></a></li>
                         <li class='last' title="Usuarios Aplicaciones" class="active"><a href='AdminUsuariosAplicaciones.html'><span>Usuarios de Aplicaciones</span></a></li>
					</ul>
               </li>
               <li class=''><a href='#' title="Gestion Servicios del Sistema"><span>Gestion Servicios del Sistema</span></a>
                  <ul style="margin-right:-42%">
                     <li><a href='ServiciosdelSistema.html' title="Servicios del Sistema"><span>Servicios del Sistema</span></a></li>
                     <li class='last'><a href='Reportes.html' title="Reportes"><span>Reportes</span></a></li>
                  </ul>
               </li>
               <li class=''><a href='#' title="Gestion Servicios del Sistema"><span>Gestion Servicios Escolares</span></a>
                  <ul style="margin-right:-42%">
                     <li><a href='asignacion.php'><span>Servicios Escolares</span></a></li>
                     <li><a href='PagosCuentaCobro.php'><span>Pago a Terceros</span></a></li>
                     <li class='last'><a href='ReportesServiciosSistema.html'><span>Reportes</span></a></li>
                  </ul>
               </li>
               <li class=''><a href='#' title="Puntos de Recarga"><span>Gestion de Credenciales</span></a>
                  <ul style="margin-right:-42%">
                     <li><a href='ReemplazarCredencial.html'><span>Remplazo de Credenciales</span></a></li>
                     <li><a href='ReporteCredencial.html'><span>Reportes</span></a></li>
                  </ul>
               </li>
               <li class=''><a href='#' title="Entrada y Salida de Personal"><span>Entrada y Salida de Personal</span></a>
                    <ul style="margin-right:-42%">
                         <li><a href='Estudiantes.html' title="Estudiantes"><span>Estudiantes</span></a></li>
                         <li><a href='FuncionariosInternos.html' title="Funcionarios Internos"><span>Funcionarios Internos</span></a></li>
                    </ul>
               </li>
            </ul>
        </div>
<div class="contenidoBorde" align="center">      
	<br>
	<table align="center" width="90%">
		<tr>
			<td><label for="txtBuscar"><font color="#09C" size="2">Buscar:</font></label></td>
			<td><input type="text" name="txtBuscar" id="txtBuscar" class="form-control"/>      
		</tr>
		<tr>
			<td colspan="2" height="20px">&nbsp;</td>
		</tr>
		<tr>
			<td><label for="txtPrimerApellido"><font color="#09C" size="2">Primer Apellido:</font></label></td>
			<td><input type="text" name="txtPrimerApellido" id="txtPrimerApellido" disabled class="form-control"/><input type="hidden" name="txtUsuario" id="txtUsuario"/></td>        
		</tr>
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr>
			<td><label for="txtSegundoApellido"><font color="#09C" size="2">Segundo Apellido:</font></label></td>
			<td><input type="text" name="txtSegundoApellido" id="txtSegundoApellido" disabled class="form-control"/></td>        
		</tr>
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr>
			<td><label for="txtPrimerNombre"><font color="#09C" size="2">Primer Nombre:</font></label></td>
			<td><input type="text" name="txtPrimerNombre" id="txtPrimerNombre" disabled class="form-control"/></td>        
		</tr>
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr>
			<td><label for="txtSegundoNombre"><font color="#09C" size="2">Segundo Nombre:</font></label></td>
			<td><input type="text" name="txtSegundoNombre" id="txtSegundoNombre" disabled class="form-control"/></td>        
		</tr>    
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr> 
		<tr>
			<td><label for="txtFecha"><font color="#09C" size="2">Fecha:</font></label></td>
			<td><input type="date" name="txtFecha" id="txtFecha" class="form-control"/></td>        
		</tr>    
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr>
			<td><label for="txtHora"><font color="#09C" size="2">Hora:</font></label></td>
			<td><input type="time" name="txtHora" id="txtHora" class="form-control"/></td>        
		</tr>    
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr>
			<td><label for="txtHora"><font color="#09C" size="2">Observaciones:</font></label></td>
			<td><textarea id="txtObservaciones" name="txtObservaciones" class="form-control"></textarea></td>        
		</tr>    
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td align="right"><button type="button" name="btnGuardar" id="btnGuardar" class="btn btn-primary" style="visibility: hidden"><b>GRABAR CAMBIOS </b></button></td>
		</tr>
		
		
	</table><br>

</div>
<script type="text/javascript">
	/*
		Fecha: 			Marzo 28 de 2016
		Descripcion: 	Script para enviar los datos al webservice para que los inserte en la base de datos
	
	*/
	
	
	//Capturar evento del boton crear
	$("#btnGuardar").click(function(e) {
		//Se obtienen los datos a ingresar
		
		var usuario = $("#txtUsuario").val();
		var fecha = $("#txtFecha").val();
		var hora = $("#txtHora").val();
		var observaciones = $("#txtObservaciones").val();
		
		//Se guardan los datos en un JSON
		var datos = {
            idUsuario: usuario,
			fecha: fecha,
			hora: hora,
			observaciones: observaciones
        }		
		
		if(fecha != "" && hora != "" && observaciones != ""){
			$.post("ActionInsertarPermiso.php", datos)
			.done(function( data ) {
				if($.trim(data) == "1"){
					alert("¡Permiso creado con exito!");
					window.location.href = "AsignarPermiso.html";
				}
			});
		}else{
			if(fecha == ""){
				alert("¡Debe ingresar una fecha valida!");
			}
			if(hora == ""){
				alert("¡Debe ingresar una hora valida!");
			}
			if(observaciones == ""){
				alert("¡Debe ingresar una observacion!");
			}
		}
		
		
    });
	
	
	
	$("#txtBuscar").keyup (function(e) {
        var usuarioConsultar = $("#txtBuscar").val();
		var datos = {
			usuario: usuarioConsultar
		}  
		$.post("ActionConsultarUsuario.php", datos)
		.done(function( data ) {
			console.log(data);
			if($.trim(data) != "[null]" && $.trim(data) != "[]"){
				var jsonUsuario = JSON.parse(data);
				
				$.each(jsonUsuario, function(i, item) {
					$("#txtUsuario").val(jsonUsuario[i].usuario);
					$("#txtPrimerApellido").val(jsonUsuario[i].primerApellido);
					$("#txtSegundoApellido").val(jsonUsuario[i].segundoApellido);
					$("#txtPrimerNombre").val(jsonUsuario[i].primerNombre);
					$("#txtSegundoNombre").val(jsonUsuario[i].segundoNombre);
				});
				$("#btnGuardar").css({"visibility":"visible"});
			}else{
				$("#btnGuardar").css({"visibility":"hidden"});
			}
		});
		//Se envian a la funcion que realiza la conexion al werbservice y genera una respuesta que se guarda en un localstorage
		//EnviarDatos({usuario: usuarioConsultar}, "ActionConsultarUsuario.php", "CONSULTARUSUARIO");
    });
	
		
 
	
</script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
</body>
</html>
