<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>SSCA</title>
        <link href="css/style.css" rel="stylesheet"/>
        <link href="css/menu.css" rel="stylesheet"/>
        <script type="text/javascript" src="js/jquery-1.10.2.js"></script>
        <script type="text/javascript" src="js/style.js"></script>	
        <script type="text/javascript" src="js/ConexionWebService.js"></script>
        <link rel="stylesheet" media="screen" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.min.css">
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="js/alertify.js"></script>
		<link rel="stylesheet" href="css/alertify.core.css" />
		<link rel="stylesheet" href="css/alertify.default.css" />
		<script src="js/script.js"></script>
        
        <style>
        	input, select{
				border-radius:8px;
				
			}
        </style>
    </head>
    <body id="bodyBase">
    	<h4 style="color:#CCC;margin-left:10px; margin-top:5px">Bienvenido(a): Nombre Usuario</h4>
        <h1 align="right" style="margin-top:2%; margin-right:2%; color:#00C">Reemplazo de credenciales</h1>
        <div id='cssmenu'>
            <ul>
               <li class="active"><a href='#' title="Admin.Usuarios"><span>Admin.Usuarios</span></a>
                    <ul style="margin-right:-42%">
                         <li><a href='#' title="Usuarios Plataforma"><span>Usuarios Plataforma</span></a></li>
                         <li class='last' title="Usuarios Aplicaciones" class="active"><a href='#'><span>Usuarios Aplicaciones</span></a></li>
					</ul>
               </li>
               <li class=''><a href='#' title="Admin.Credenciales"><span>Admin.Credenciales</span></a>
                  <ul style="margin-right:-42%">
                     <li><a href='#' title="Reemplazo de credenciales"><span>Reemplazo de credenciales</span></a></li>
                     <li class='last'><a href='#' title="Cambio de Estado"><span>Cambio de Estado</span></a></li>
                  </ul>
               </li>
               <li class=''><a href='#' title="Liquidaci&oacute;n y Pagos"><span>Liquidaci&oacute;n y Pagos</span></a>
                  <ul style="margin-right:-42%">
                     <li><a href='#'><span>Liquidaci&oacute;n y Pagos</span></a></li>
                     <li><a href='#'><span>Product 2</span></a></li>
                     <li class='last'><a href='#'><span>Product 3</span></a></li>
                  </ul>
               </li>
               <li class=''><a href='#' title="Puntos de Recarga"><span>Puntos de Recarga</span></a>
                  <ul style="margin-right:-42%">
                     <li><a href='#'><span>Usuarios Aplicaciones</span></a></li>
                     <li><a href='#'><span>Product 2</span></a></li>
                     <li class='last'><a href='#'><span>Product 3</span></a></li>
                  </ul>
               </li>
               <li class=''><a href='#' title="Centro - Operaciones Rutas"><span>Centro - Operaciones Rutas</span></a>
                    <ul style="margin-right:-42%">
                         <li><a href='#' title="Vehiculos"><span>Vehiculos</span></a></li>
                         <li><a href='#' title="Conductores"><span>Conductores</span></a></li>
                         <li><a href='#' title="Monitores"><span>Monitores</span></a></li>
                         <li><a href='#' title="v"><span>Rutas</span></a></li>
                         <li><a href='#' title="Centro de Pagos"><span>Centro de Pagos</span></a></li>
                         <li class='last' title="Tracking"><a href='#'><span>Tracking</span></a></li>
                    </ul>
               </li>
            </ul>
        </div>
        
        <div class="contenidoBorde">
        <form id="commentForm" method="post" action="#">
            <table style="padding-left:4%; padding-top:4.5%;padding-right:20px;position:absolute" cellspacing="0" cellpadding="0" width="100%">
                <tr>
                    <td><label for="txtUsuario">Id de Usuario:</label></td>
                    <td colspan="7"><input type="text" name="txtUsuario" id="txtUsuario"/></td>        
                </tr>
                <tr>
                	<td height="10px">&nbsp;</td>
                </tr>               
                <tr>
                <tr valign="top">
                    <td><label for="selectAcudiente">Motivo de reemplazo:</label></td>
                    <td colspan="5">
                    	<input type="radio" name="radioMotivo" id="radioMotivoDeterioro" value="DETERIORO"/><label for="radioMotivoDeterioro">DETERIORO</label><br>
                        <input type="radio" name="radioMotivo" id="radioMotivoPerdida" value="PERDIDA"/><label for="radioMotivoPerdida">PERDIDA</label><br>
                        <input type="radio" name="radioMotivo" id="radioMotivoOtros" value="OTROS"/><label for="radioMotivoOtros">OTROS</label><input type="text" id="txtOtroMotivo" name="txtOtroMotivo"/>
                    	
                    
                    </td>        
                </tr>
                <tr>
                	<td height="10px">&nbsp;</td>
                </tr>               
                <tr>
                <tr>
                    <td><label for="txtSaldo">Saldo Existente:</label></td>
                    <td><input type="text" name="txtSaldo" id="txtSaldo" disabled/></td>        
                </tr>
                <tr>
                	<td height="10px">&nbsp;</td>
                </tr>
                <tr>
                    <td><label for="txtPrimerApellido">Primer Apellido:</label></td>
                    <td><input type="text" name="txtPrimerApellido" id="txtPrimerApellido" disabled/></td>         
                    <td width="10px">&nbsp;</td>               
                    <td><label for="txtSegundoApellido">Segundo Apellido:</label></td>
                    <td><input type="text" name="txtSegundoApellido" id="txtSegundoApellido" disabled/></td>        
                </tr>
                <tr>
                	<td height="10px">&nbsp;</td>
                </tr>
                <tr>
                    <td><label for="txtPrimerNombre">Primer Nombre:</label></td>
                    <td><input type="text" name="txtPrimerNombre" id="txtPrimerNombre" disabled/></td>        
                    <td>&nbsp;</td>    
                    <td><label for="txtSegundoNombre">Segundo Nombre:</label></td>
                    <td><input type="text" name="txtSegundoNombre" id="txtSegundoNombre" disabled/></td>        
                </tr> 
                <tr>
                	<td height="10px">&nbsp;</td>
                </tr>               
                <tr>
                    <td><label for="txtTelefono1">Tel&eacute;fono 1:</label></td>
                    <td><input type="tel" name="txtTelefono1" id="txtTelefono1" disabled/></td>        
                	<td>&nbsp;</td>  
                    <td><label for="txtTelefono2">Tel&eacute;fono 2:</label></td>
                    <td><input type="tel" name="txtTelefono2" id="txtTelefono2" disabled/></td>        
                </tr>
                <tr>
                	<td height="10px">&nbsp;</td>
                </tr>               
                <tr>
                    <td><label for="selectCurso">Curso:</label></td>
                    <td><input type="text" name="selectCurso" id="selectCurso" disabled/></td>        
                    <td>&nbsp;</td>    
                    <td><label for="txtTipoSangre">Tipo de Sangre:</label></td>
                    <td><input type="text" name="txtTipoSangre" id="txtTipoSangre" disabled/></td>        
                </tr> 
                <tr>
                	<td height="10px">&nbsp;</td>
                </tr>  
                <tr>
                    <td><label for="txtTipoUsuario">Tipo de Usuario:</label></td>
                    <td><input type="text" name="txtTipoUsuario" id="txtTipoUsuario" disabled/></td>        
                </tr>
                <tr style="display:none" id="rowAcudiente">
                    <td valign="top"><label for="txtAcudiente">Acudiente asociado:</label></td>
                    <td>
                        <input type="text" name="txtAcudiente" id="txtAcudiente" disabled/>
                    </td>        
                </tr>    
                <tr>
                    <td>&nbsp;</td>
                    <td align="right" colspan="5"><!--<button type="button" name="btnCrearReemplazo" id="btnCrearReemplazo"><b>GUARDAR CAMBIOS</b></button>--><button type="submit" style="width:150px; border-radius:6px; height:30px;background-color:#069;color:#FFF;" name="btnCrearUsuario" id="btnCrearUsuario">GUARDAR CAMBIOS</button></td>
                </tr>
                
                
            </table>
            </form>
            
            
           
        </div>
        <script src="js/jquery.js"></script>
		<script src="js/jquery.validate.js"></script>
        <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
        <script>
			var opcionSeleccionar = "";
			
			
        	$.validator.setDefaults({
				submitHandler: function() {
					//Valor guardado cuando se cierra un popup y se concreto una operaci√≥n
					var opcionSeleccionar = "";
						
					//Capturar evento del boton crear
					
						//Se obtienen los datos a enviar		
						var usuarioIngresado = $("#txtUsuario").val();
						var motivo = $("input[name='radioMotivo']:checked").val(); ;
						
						/*
							Descripcion: Obtener fecha y hora para registrar movimientos
						*/
						var date = new Date();
						var dia = date.getDate();
						var mes = (date.getMonth() + 1);
						var year = date.getFullYear();
						var saldo = 500;
						
						if(dia < 10) {
							dia = '0' + dia;
						} 
						
						if(mes < 10) {
							mes = '0' + mes;
						} 
						
						var fechaActual = year + "-" + mes + "-" + dia;
						var horaActual = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds(); 
						
						//Se guardan los datos en un JSON
						var usuario = {
							usuario: usuarioIngresado,
							saldo: saldo,
							fecha: fechaActual,
							hora: horaActual
						}		
						
						//Se envian a la funcion que realiza la conexion al werbservice y genera una respuesta que se guarda en un localstorage
						EnviarDatos(usuario, "ActionCrearReemplazoCredencial.php", "REEMPLAZOCREDENCIAL");
						
						$("#txtPrimerApellido").val("");
						$("#txtSegundoApellido").val("");
						$("#txtPrimerNombre").val("");
						$("#txtSegundoNombre").val("");
						$("#txtDireccion").val("");
						$("#txtTelefono1").val("");
						$("#txtTelefono2").val("");
						$("#txtClave").val("");
						$("#txtAcudiente").val("");
						$("#txtTipoUsuario").val("");
						$("#txtUsuario").val("");
						$( "#rowAcudiente" ).css( "display", "none" );
						
					
				},
				showErrors: function(map, list) {
					// there's probably a way to simplify this
					var focussed = document.activeElement;
					if (focussed && $(focussed).is("input, textarea")) {
						$(this.currentForm).tooltip("close", {
							currentTarget: focussed
						}, true)
					}
					this.currentElements.removeAttr("title").removeClass("ui-state-highlight");
					$.each(list, function(index, error) {
						$(error.element).attr("title", error.message).addClass("ui-state-highlight");
					});
					if (focussed && $(focussed).is("input, textarea")) {
						$(this.currentForm).tooltip("open", {
							target: focussed
						});
					}
				}
			});
			
			(function() {
				// use custom tooltip; disable animations for now to work around lack of refresh method on tooltip
				$("#commentForm").tooltip({
					show: false,
					hide: false
				});
			
				// validate the comment form when it is submitted
				$("#commentForm").validate({
					rules: {
						txtUsuario: "required",
						txtClave: {
							required: true,
							minlength: 1
						}
					},
					messages: {
						txtUsuario: "Por favor ingrese un usuario",
						txtClave: "Por favor ingrese una clave"
					}
				});
			})();
			
			
		  /*
			Fecha: 23 de Octubre de 2015
			Descripcion: Evento para capturar la existencia del usuario en la base de datos al quitar el focus del campo de texto de usuario
		*/
		$("#txtUsuario").keyup (function(e) {
			var usuarioConsultar = $("#txtUsuario").val();
			
			//Se envian a la funcion que realiza la conexion al werbservice y genera una respuesta que se guarda en un localstorage
			EnviarDatos({usuario: usuarioConsultar}, "../ssca/ActionConsultarUsuarioPorId.php", "CONSULTARUSUARIOREEMPLAZOC");
		});
        </script>
				
           
    </body>
</html>
